' Gambas class file

' Copyright(C) 2011-2014, Michał Głowienka aka eloaders <eloaders@linux.pl>
'
' This program is free software; you can redistribute it and/or modify
' it under the terms of the GNU General Public License as published by
' the Free Software Foundation; either version 3 of the License, or
' (at your option) any later version.
'
' This program is distributed in the hope that it will be useful,
' but WITHOUT ANY WARRANTY; without even the implied warranty of
' MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
' GNU General Public License for more details.
'
' You should have received a copy of the GNU General Public License
' along with this program. If not, see <http://www.gnu.org/licenses/>.


Public Sub Form_Open()
 Dim i, Maximum, ty As Float
 Dim allfilesystems, Face As String
 If Settings["Window/X"] = Null Then
  Me.Center
 Else
  Me.X = Settings["Window/X", Me.X]
  Me.Y = Settings["Window/Y", Me.Y]
 Endif
 'Shell "LC_ALL=C df"
 Shell "LC_ALL=C df | awk {'print $1'} | wc -l" Wait To allfilesystems
 GridView1.Columns.Count = 6
 GridView1.Rows.Count = CFloat(Val(allfilesystems)) 
 GridView1.Columns.Width = 80
 GridView1.Columns[5].Width = 400
 GridView1[0, 0].Text = "Filesystem"
 GridView1[0, 1].Text = "1K-blocks"
 GridView1[0, 2].Text = "Used"
 GridView1[0, 3].Text = "Available"
 GridView1[0, 4].Text = "Use % "
 GridView1[0, 5].Text = "Mounted on"
 Maximum = CFloat(Val(allfilesystems))
 For i = 2 To Maximum
  For ty = 1 To 5
   Shell "LC_ALL=C df | awk {'print $" & ty & "'} | sed -n '" & i & "p'" To Face
   GridView1[i - 1, ty - 1].Text = Replace(Face, "\n", "")
  Next
 Next
 For i = 2 To Maximum
 For ty = 6 To 6
   Shell "LC_ALL=C df | awk {'print $" & ty & ", $7, $8, $9, $10, $11'} | sed -n '" & i & "p'" To Face
   GridView1[i - 1, ty - 1].Text = Replace(Face, "\n", "")
 Next
 Next
  ' For ty = 1 To 9
  '  Shell "awk {'print $" & ty & "'} /proc/net/dev | sed -n '" & i & "p'" To Face
  '  Finfosys.GridView1[i - 2, ty - 1].Text = Replace(Face, "\n", "")
  ' Next
 'Filesystem     1K-blocks      Used Available Use% Mounted on
 
End

Public Sub Form_Resize()

End

Public Sub Button1_Click()

 Me.Close

End
